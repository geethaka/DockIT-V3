<!DOCTYPE html>
<html lang="en">

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<head>
	<title>Host management
</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
		<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,400italic,700,800' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Raleway:300,200,100' rel='stylesheet' type='text/css'>

    <!-- Bootstrap core CSS -->
    <link href="js/bootstrap/dist/css/bootstrap.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="js/bootstrap.switch/bootstrap-switch.css" />
	<link rel="stylesheet" type="text/css" href="js/bootstrap.datetimepicker/css/bootstrap-datetimepicker.min.css" />
  <link rel="stylesheet" type="text/css" href="js/jquery.select2/select2.css" />
  <link rel="stylesheet" type="text/css" href="js/bootstrap.slider/css/slider.css" />
  <link href="js/fuelux/css/fuelux.css" rel="stylesheet">
  <link href="js/fuelux/css/fuelux-responsive.min.css" rel="stylesheet">
  <link rel="stylesheet" href="fonts/font-awesome-4/css/font-awesome.min.css">
  <link rel="stylesheet" href="css/pygments.css">
  <link rel="stylesheet" type="text/css" href="js/jquery.gritter/css/jquery.gritter.css" />
	<!-- Select2 -->
	<link rel="stylesheet" type="text/css" href="js/jquery.select2/select2.css" />


	<!-- Slider -->
	<link rel="stylesheet" type="text/css" href="js/bootstrap.slider/css/slider.css" />

    <!-- Custom styles for this template -->
    <link href="css/style.css" rel="stylesheet" />

	<link rel="stylesheet" href="fonts/font-awesome-4/css/font-awesome.min.css">
	<link rel="stylesheet" href="css/pygments.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <![endif]-->
  <link rel="stylesheet" type="text/css" href="js/jquery.nanoscroller/nanoscroller.css" />
  <link rel="stylesheet" type="text/css" href="js/bootstrap.switch/bootstrap-switch.css" />
  <link href="js/jquery.icheck/skins/square/blue.css" rel="stylesheet">


	</head>
	
	<body>

		<!-- Fixed navbar -->
<div id="head-nav" class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="fa fa-gear"></span>
      </button>
      <a class="navbar-brand" href="#"><span>Dock IT</span></a>
    </div>
    <div class="navbar-collapse collapse">

  <ul class="nav navbar-nav navbar-right user-nav">
    <li class="dropdown profile_menu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown">Admin <b class="caret"></b></a>
      <ul class="dropdown-menu">

        <li><a href="#">Sign Out</a></li>
      </ul>
    </li>
  </ul>


    </div><!--/.nav-collapse -->
  </div>
</div>


<div id="cl-wrapper" class="fixed-menu">
    <div class="cl-sidebar" data-position="right" data-step="1" data-intro="<strong>Fixed Sidebar</strong> <br/> It adjust to your needs." >
      <div class="cl-toggle"><i class="fa fa-bars"></i></div>
      <div class="cl-navblock">
        <div class="menu-space">
          <div class="content">
          
            <ul class="cl-vnavigation">
            
                   


                  <li ><a href="/main"><i class="fa fa-cloud-upload"></i><span>Docker Gen</span></a></li>
              <li class="active"><a href="/"><i class="fa fa-inbox"></i><span>Hosts</span></a></li>
              <li><a href="/"><i class="fa fa-gears"></i><span>Containers</span></a></li>
               <li><a href="/imagedata2"><i class="fa  fa-sort-numeric-asc"></i><span>Registry</span></a></li>
                <li><a href="/net"><i class="fa  fa-exchange"></i><span>Network</span></a></li>
                <li><a href=""><i class="fa fa-bar-chart-o"></i><span>Logger</span></a>
                  <ul class="sub-menu">
                  <li><a href="/jrn">Journal</a></li>
                  <li><a href="http://172.17.8.101/index.html#/dashboard/elasticsearch/DockIT">Log Center</a></li>

                </ul>

                </li>

                

                <li><a href=""><i class="fa fa-tachometer"></i><span>Monitoring</span></a>
                  <ul class="sub-menu">
           

                  <li><a href="/mon"> Realtime</a></li>
                  <li><a href="http://172.17.8.102:3000/dashboard/db/dockit"> Historical</a></li>



     
            </ul>
          </div>
        </div>
        <div class="text-right collapse-button" style="padding:7px 9px;">
          <input type="text" class="form-control search" placeholder="Search..." />
          <button id="sidebar-collapse" class="btn btn-default" style=""><i style="color:#fff;" class="fa fa-angle-left"></i></button>
        </div>
      </div>
    </div>


  <div class="container-fluid" id="pcont">


    <div class="page-head">
      <h2>Host Machines Detail</h2>

    </div>






 <div class="cl-mcont">
	
	

		<div class="row">
			<div class="col-md-12">
			
				<table class="table table-hover" id="hostdetails">
					<tr class="info">
						<th>IPaddress</th>
						<th>ExpireDate</th>
						<th>Status</th>
						 <th>Actions</th>
       
					</tr>
				<!--  <tr class="info">
				
					<td>
					<button type="button" class="btn btn-primary">Start</button>
					<button type="button" class="btn btn-warning">Stop</button>
					<button type="button" class="btn btn-success">View</button>
					</td>
					
				  </tr>-->
  
				</table>
			
			
			</div>
		</div>



</div>
</div>


</div>




	
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js">
  <script src="js/jquery.js"></script>
  <script src="js/jquery.select2/select2.min.js" type="text/javascript"></script>
  <script src="js/jquery.parsley/parsley.js" type="text/javascript"></script>
  <script src="js/bootstrap.slider/js/bootstrap-slider.js" type="text/javascript"></script>
	<script type="text/javascript" src="js/jquery.nanoscroller/jquery.nanoscroller.js"></script>
	<script type="text/javascript" src="js/jquery.nestable/jquery.nestable.js"></script>
	<script type="text/javascript" src="js/behaviour/general.js"></script>
  <script src="js/jquery.ui/jquery-ui.js" type="text/javascript"></script>
	<script type="text/javascript" src="js/bootstrap.switch/bootstrap-switch.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
	<script type="text/javascript" src="js/jquery.icheck/icheck.min.js"></script>
  <script type="text/javascript" src="js/jquery.gritter/js/jquery.gritter.js"></script>

  <script type="text/javascript" src="js/jquery.niftymodals/js/jquery.modalEffects.js"></script>





  <script type="text/javascript" src="js/fuelux/loader.min.js"></script>
  <script src="js/modernizr.js" type="text/javascript"></script>



  <script type="text/javascript" src="js/behaviour/general.js"></script>


</script>
<script type="text/javascript">

  $(document).ready(function(){
      //initialize the javascript
      App.init();
 
    });


$.ajax({
    url: 'http://localhost:3000/machines',
    type: "get",
    dataType: "json",
    success: function(data, textStatus, jqXHR) {
        // since we are using jQuery, you don't need to parse response
        drawTable(data);
    }
});

function drawTable(data) {
    for (var i = 0; i < data.length; i++) {
	console.log(data[i]);
        drawRow(data[i]);
    }
}

function drawRow(rowData) {
    var row = "<tr>";
	row += "<td>" + rowData.Hostip + "</td>";
	row += "<td>" + rowData.Expir + "</td>";
	row += "<td>" + rowData.status + "</td>";
	row += '<td>';
	row += '<button type="button" data-host="'+  rowData.Hostip  +'" class="start btn btn-primary"';
	if(rowData.status == 'live')	
		row += 'disabled';		
     row += '>Start</button>';
	 
    row +=	'<button type="button" data-host="'+  rowData.Hostip  +'" class="stop btn btn-warning"';
	
	if(rowData.status == 'dead')			
		row += 'disabled';	
	
	row += '>Stop</button>';
	
	
	
	var ips=rowData.Hostip.substring(9,12);
	console.log(ips);
			
	url='/containerdata?ip='+ips;
	
	if(rowData.status == 'dead')	
	row +=	'<a class ="btn  btn-success.disabled" href='+url+' onclick="return false; " >View</a>';
	else
	row +=	'<a class ="btn btn-success" href='+url+'>View</a>';
	
	urlimages='/imagedata1?ip='+ips;
	if(rowData.status == 'dead')	
	 row +=	'<a class ="btn btn-info.disabled" href='+urlimages+' onclick="return false;">Images</a>';
	else
	 row +=	'<a class ="btn btn-info" href='+urlimages+'>Images</a>';
	
	testinfo='/testinfos?ip='+ips;
	
	if(rowData.status == 'dead')	
	row +=	'<a class ="btn btn-primary.disabled" href='+testinfo+' onclick="return false;">Info</a>';
	else
	row +=	'<a class ="btn btn-primary" href='+testinfo+'>Info</a>';

	testinfol='/testinfosl?ip='+ips;

	if(rowData.status == 'dead')	
	row +=	'<a class ="btn btn-primary.disabled" href='+testinfol+' onclick="return false;">Run</a>';
	else
	row +=	'<a class ="btn btn-primary" href='+testinfol+'>Run</a>';
	
	
   row += "</tr>";
   $("#hostdetails").append(row); 
}

$('body').on('click','.start', function()
{
	console.log($(this).data('host'));
	var ipt=$(this).data('host');
	var ls="asd";
	$.get("/start",{ipt: ipt,name: ls}) 
	location.reload();
});

$('body').on('click','.stop', function()
{
	console.log($(this).data('host'));
	var ip=$(this).data('host');
	$.get("/stop",{ip: ip}) 
	location.reload();
});

$('body').on('click','.testinfos', function()
{
	console.log($(this).data('host'));
	var ip=$(this).data('host');
	$.get("/testinfos",{ip: ip}) 
	
});


</script>


	</body>

</html>