<!DOCTYPE html>
<html lang="en">
  <head>



    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="images/favicon.png">

    <title>Dock IT</title>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,400italic,700,800' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Raleway:300,200,100' rel='stylesheet' type='text/css'>

    <!-- Bootstrap core CSS -->
    <link href="js/bootstrap/dist/css/bootstrap.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="js/bootstrap.switch/bootstrap-switch.css" />
	<link rel="stylesheet" type="text/css" href="js/bootstrap.datetimepicker/css/bootstrap-datetimepicker.min.css" />
  <link rel="stylesheet" type="text/css" href="js/jquery.select2/select2.css" />
  <link rel="stylesheet" type="text/css" href="js/bootstrap.slider/css/slider.css" />
  <link href="js/fuelux/css/fuelux.css" rel="stylesheet">
  <link href="js/fuelux/css/fuelux-responsive.min.css" rel="stylesheet">
  <link rel="stylesheet" href="fonts/font-awesome-4/css/font-awesome.min.css">
  <link rel="stylesheet" href="css/pygments.css">
  <link rel="stylesheet" type="text/css" href="js/jquery.gritter/css/jquery.gritter.css" />
	<!-- Select2 -->
	<link rel="stylesheet" type="text/css" href="js/jquery.select2/select2.css" />


	<!-- Slider -->
	<link rel="stylesheet" type="text/css" href="js/bootstrap.slider/css/slider.css" />

    <!-- Custom styles for this template -->
    <link href="css/style.css" rel="stylesheet" />

	<link rel="stylesheet" href="fonts/font-awesome-4/css/font-awesome.min.css">
	<link rel="stylesheet" href="css/pygments.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <![endif]-->
  <link rel="stylesheet" type="text/css" href="js/jquery.nanoscroller/nanoscroller.css" />
  <link rel="stylesheet" type="text/css" href="js/bootstrap.switch/bootstrap-switch.css" />
  <link href="js/jquery.icheck/skins/square/blue.css" rel="stylesheet">




</head>

<body>

<!-- Fixed navbar -->
<div id="head-nav" class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="fa fa-gear"></span>
      </button>
      <a class="navbar-brand" href="#"><span>Dock IT</span></a>
    </div>
    <div class="navbar-collapse collapse">

  <ul class="nav navbar-nav navbar-right user-nav">
    <li class="dropdown profile_menu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown">Admin <b class="caret"></b></a>
      <ul class="dropdown-menu">

        <li><a href="#">Sign Out</a></li>
      </ul>
    </li>
  </ul>


    </div><!--/.nav-collapse -->
  </div>
</div>





<div id="cl-wrapper" class="fixed-menu">
    <div class="cl-sidebar" data-position="right" data-step="1" data-intro="<strong>Fixed Sidebar</strong> <br/> It adjust to your needs." >
      <div class="cl-toggle"><i class="fa fa-bars"></i></div>
      <div class="cl-navblock">
        <div class="menu-space">
          <div class="content">
          
            <ul class="cl-vnavigation">
            
                   
     

 <li class="active"><a href="/main"><i class="fa fa-cloud-upload"></i><span>Docker Gen</span></a></li>
              <li ><a href="/"><i class="fa fa-inbox"></i><span>Hosts</span></a></li>
              <li><a href="/"><i class="fa fa-gears"></i><span>Containers</span></a></li>
               <li><a href="/imagedata2"><i class="fa  fa-sort-numeric-asc"></i><span>Registry</span></a></li>
                <li><a href=""><i class="fa fa-bar-chart-o"></i><span>Logger</span></a>
                  <ul class="sub-menu">
                  <li><a href="/jrn">Journal</a></li>
                  <li><a href="http://172.17.8.101/index.html#/dashboard/elasticsearch/DockIT">Log Center</a></li>

                </ul>

                </li>
                 <li><a href="http://172.17.8.102:3000/dashboard/db/dockit"><i class="fa fa-tachometer"></i><span>Monitoring</span></a></li>



     
            </ul>
          </div>
        </div>
        <div class="text-right collapse-button" style="padding:7px 9px;">
          <input type="text" class="form-control search" placeholder="Search..." />
          <button id="sidebar-collapse" class="btn btn-default" style=""><i style="color:#fff;" class="fa fa-angle-left"></i></button>
        </div>
      </div>
    </div>

  


  <div class="container-fluid" id="pcont">


 
       


            
          
     
   






              <div class="cl-mcont">



        <div class="row">

     


              <div class="form-group">
               <label class="col-sm-1 control-label">Status</label>
               <div class="col-sm-10">
                 <textarea class="form-control" rows="20" name="status" id="status"></textarea>
               </div>
             </div>


          </div>


    </div>

  </div>





  </div>


  <script src="js/jquery.js"></script>
  <script src="js/jquery.select2/select2.min.js" type="text/javascript"></script>
  <script src="js/jquery.parsley/parsley.js" type="text/javascript"></script>
  <script src="js/bootstrap.slider/js/bootstrap-slider.js" type="text/javascript"></script>
	<script type="text/javascript" src="js/jquery.nanoscroller/jquery.nanoscroller.js"></script>
	<script type="text/javascript" src="js/jquery.nestable/jquery.nestable.js"></script>
	<script type="text/javascript" src="js/behaviour/general.js"></script>
  <script src="js/jquery.ui/jquery-ui.js" type="text/javascript"></script>
	<script type="text/javascript" src="js/bootstrap.switch/bootstrap-switch.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
	<script type="text/javascript" src="js/jquery.icheck/icheck.min.js"></script>
  <script type="text/javascript" src="js/jquery.gritter/js/jquery.gritter.js"></script>

  <script type="text/javascript" src="js/jquery.niftymodals/js/jquery.modalEffects.js"></script>


  <script src="js/raphael-2.1.4.min.js"></script>
<script src="js/justgage-1.1.0.min.js"></script>


  <script type="text/javascript" src="js/fuelux/loader.min.js"></script>
  <script src="js/modernizr.js" type="text/javascript"></script>



  <script type="text/javascript" src="js/behaviour/general.js"></script>

<script src="js/socket.io.js"></script>


  <script type="text/javascript">

  var g = new JustGage({
    id: "gauge",
    value: 0,
    min: 0,
    max: 100,
    title: "Memory Usage"
  });

   var g1 = new JustGage({
    id: "gauge1",
    value: 0,
    min: 0,
    max: 100,
    title: "CPU Usage"
  });

  
    var socket = io();
    socket.on('data', function(msg){
    $('#messages').append($('<li>').text(msg));
  });


    $(document).ready(function(){
      //initialize the javascript
      App.init();
      App.wizard();

      

  
      var data = {};
      var ip = document.getElementById("ip").innerHTML;
      data.ip = ip ; 
      

     $.ajax({
    type: 'POST',
    data: JSON.stringify(data),
    contentType: 'application/json',
            url: 'http://localhost:3000/nets',
            success: function(data) {
                console.log('success');
                //console.log(JSON.stringify(data));

                //var l = data.json;
               // var val = data.data;
               // $("#status").val(val[0]);
                 //$('#messages').append($('<li>').text(data.name));
               console.log(data);

               if(data.uptime.split(':').length == 1){

                document.getElementById("work").innerHTML =  data.uptime+' mins';


               }else{

                document.getElementById("work").innerHTML =  data.uptime+ ' Hrs';


               }
                
                document.getElementById("work1").innerHTML =  data.users;

                 document.getElementById("load").innerHTML =  data.load;
                 document.getElementById("mem1").innerHTML =  data.tmem+ 'Kb';
                 document.getElementById("mem2").innerHTML =  data.umem+ 'Kb';
                  document.getElementById("p1").innerHTML =  data.ptot.split(' ')[1];
                   document.getElementById("p2").innerHTML =  data.prun.split(' ')[1];
                    document.getElementById("p3").innerHTML =  data.pstop.split(' ')[1];


                
               document.getElementById("used").innerHTML = Math.round(data.cpup * 100) / 100 +' %';

               console.log(data.tmem);
               console.log(data.umem);
              //   document.getElementById("total1").innerHTML =  data.meml+' GB';
              //    document.getElementById("net1").innerHTML =  data.net;
              //     document.getElementById("net2").innerHTML =  data.net2;
             //    var len = data.cpu.length;
             //    console.log(data.cpu.substring(0,len-2));
                 g1.refresh(data.cpup);
                 g.refresh((data.umem/data.tmem)*100);
               
            //     console.log(data.name);


            $("#r2c2").height($("#r2c1").height());
            console.log($("#r2c1").height());
             


            }



  });





    });


    $('#addf').click(function(e){
		e.preventDefault();
		console.log('select_link clicked');

    $.gritter.add({
      title: 'Docker Notify',
      text: 'Generating Docker Image',
      class_name: 'success',
      sticky: true
    });

		var data = {};
    data.name = $("#name").val();



		data.base_os = $("input[name=rad1]:checked").val();

    if(data.base_os == "Other"){
      data.base_os=$("#otheros").val();
    }
		data.author = $("#author").val();
		data.packages = $("#packages").val();
		data.folders = $("#folders").val();
		data.volumes = $("#volumes").val();
		data.ports = $("#ports").val();



		console.log(data);

    $.ajax({
    type: 'POST',
    data: JSON.stringify(data),
    contentType: 'application/json',
            url: 'http://localhost:3000/addfile',
            success: function(data) {
                console.log('success');
                //console.log(JSON.stringify(data));


                var val = data.data;
                $("#status").val(val[0]);
                var darray = JSON.stringify(val).split('\n');

                var last = darray[darray.length-1].split(' ');
                var imageid = last[last.length-1].substring(0, last[last.length-1].length-4);


                $("#imgid").html(imageid);


                $.gritter.removeAll({

                });


            }



  });

});



 $('#addi').click(function(e){
    e.preventDefault();

    $.gritter.add({
      title: 'Docker Notify',
      text: 'Commit Docker Image',
      class_name: 'success',
      sticky: true
    });

    var data = {};
    data.name = $("#namei2").val();
    data.repo = $("#repo").val();
    data.version = $("#version").val();
    data.namef = $("#imgid").html();



       $.ajax({
    type: 'POST',
    data: JSON.stringify(data),
    contentType: 'application/json',
            url: 'http://localhost:3000/addimage',
            success: function(data) {
                console.log('success');
                //console.log(JSON.stringify(data));


                var val = data.data;
                console.log(val);
                $("#statusp").val(val);

                   $.gritter.removeAll({

                });
      


            }



  });













    });




$('#canc').click(function(e){
  e.preventDefault();
  console.log('can clicked');
  $.gritter.add({
    title: 'Success',
    text: 'This is a simple Gritter Notification.',
    class_name: 'success',
  });
  return false;
});

  </script>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/behaviour/voice-commands.js"></script>
  <script src="js/bootstrap/dist/js/bootstrap.min.js"></script>
</body>
</html>
